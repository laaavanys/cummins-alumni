<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Find a Mentor</title>
  <link rel="stylesheet" href="style-mentor.css"/>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">Find a Mentor</h1>
      <p class="subtitle">Tell us your goals. We’ll match mentors that fit best.</p>
    </header>

    <section class="card">
      <form id="menteeForm" class="form">
        <div>
          <label class="label" for="t_name">Your Name</label>
          <input id="t_name" class="input" required placeholder="e.g., Lavanya"/>
        </div>

        <div>
          <label class="label" for="t_email">Email</label>
          <input id="t_email" type="email" class="input" required placeholder="you@domain.com"/>
        </div>

        <div class="full">
          <label class="label">Areas You Want Mentorship In</label>
          <input id="t_interest" class="input" placeholder="Type comma separated: Web Dev, AI"/>
          <div class="chips" id="interestChips">
            <span class="chip">Web Development</span>
            <span class="chip">Data Science</span>
            <span class="chip">Machine Learning</span>
            <span class="chip">AI</span>
            <span class="chip">Cloud</span>
            <span class="chip">Cybersecurity</span>
            <span class="chip">Android</span>
            <span class="chip">Competitive Programming</span>
            <span class="chip">Blockchain</span>
            <span class="chip">UI/UX</span>
          </div>
        </div>

        <div>
          <label class="label" for="t_min_exp">Preferred Minimum Mentor Experience</label>
          <select id="t_min_exp" class="select">
            <option value="0">No preference</option>
            <option value="1">1+ years</option>
            <option value="3">3+ years</option>
            <option value="5">5+ years</option>
            <option value="8">8+ years</option>
          </select>
        </div>

        <div>
          <label class="label" for="t_need_hours">Time you can commit / week</label>
          <select id="t_need_hours" class="select">
            <option value="1">~1 hr</option>
            <option value="2" selected>2+ hrs</option>
            <option value="4">4+ hrs</option>
          </select>
        </div>

        <div class="full">
          <label class="label" for="t_goal">Your Goal (brief)</label>
          <textarea id="t_goal" class="textarea" placeholder="e.g., Crack 10+ LPA role; build DS/Algo foundation; portfolio review etc."></textarea>
        </div>

        <div class="row full">
          <button class="btn btn-primary" type="submit">Find Matches</button>
          <a class="btn btn-ghost" href="index.html">Back</a>
        </div>
      </form>
    </section>

    <div class="spacer"></div>

    <section class="card">
      <h3 style="margin:0 0 8px 0;">Your Matches</h3>
      <p class="subtitle" id="matchHint">We’ll show top mentors based on skill overlap, experience and availability.</p>
      <div id="results" class="result-list"></div>
    </section>
  </div>

  <script>
    // chip toggles
    document.querySelectorAll('#interestChips .chip').forEach(ch => {
      ch.addEventListener('click', () => ch.classList.toggle('active'));
    });

    // storage helpers
    const getMentors = () => JSON.parse(localStorage.getItem('mentors') || '[]');

    // seed some demo mentors if none exist (for first-time UX)
    if(getMentors().length === 0){
      localStorage.setItem('mentors', JSON.stringify([
        {id:1, name:"Riya Sharma", email:"riya@ex.com", linkedin:"", experience:4, availability:2, expertise:["Web Development","UI/UX"], bio:"Frontend + UX reviews"},
        {id:2, name:"Ananya Patel", email:"ananya@ex.com", linkedin:"", experience:6, availability:3, expertise:["AI","Machine Learning","Data Science"], bio:"ML roadmaps & mini-projects"},
        {id:3, name:"Neha Gupta", email:"neha@ex.com", linkedin:"", experience:2, availability:1, expertise:["Android","Competitive Programming"], bio:"Android basics, DSA mentoring"},
        {id:4, name:"Sana Khan", email:"sana@ex.com", linkedin:"", experience:8, availability:4, expertise:["Cloud","Cybersecurity"], bio:"Cloud careers, security fundamentals"}
      ]));
    }

    function scoreMentor(mentor, interests, minExp, needHours){
      let score = 0;

      // skill overlap (max weight)
      const lowerSet = new Set(mentor.expertise.map(e => e.toLowerCase()));
      interests.forEach(i => {
        const k = i.toLowerCase();
        if(lowerSet.has(k)) score += 3;
        else {
          // partial match (contains)
          for(const ex of lowerSet){ if(ex.includes(k) || k.includes(ex)) { score += 2; break; } }
        }
      });

      // experience preference
      if(mentor.experience >= minExp) score += 1;

      // availability match
      if(mentor.availability >= Number(needHours)) score += 1;

      return score;
    }

    function renderResults(list){
      const wrap = document.getElementById('results');
      wrap.innerHTML = '';
      if(list.length === 0){
        wrap.innerHTML = `<div class="result-card"><div>No matching mentors found. <span class="warning">Try fewer filters.</span></div></div>`;
        return;
      }

      list.slice(0,6).forEach(m=>{
        const div = document.createElement('div');
        div.className = 'result-card';
        div.innerHTML = `
          <div>
            <h4 class="result-title">${m.name} <span class="badge">${m.experience}+ yrs</span></h4>
            <div class="meta">Expertise: ${m.expertise.join(', ')}</div>
            <div class="meta">Availability: ${m.availability} hr/week</div>
            ${m.bio ? `<div class="meta">${m.bio}</div>` : ''}
          </div>
          <div class="center">
            <div class="score">Score: ${m._score}</div>
            <div class="spacer"></div>
            <a class="btn btn-primary" href="mailto:${m.email}?subject=Mentorship%20Request">Contact</a>
          </div>
        `;
        wrap.appendChild(div);
      });
    }

    document.getElementById('menteeForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const manual = document.getElementById('t_interest').value.split(',').map(s=>s.trim()).filter(Boolean);
      const chips = Array.from(document.querySelectorAll('#interestChips .chip.active')).map(el=>el.textContent.trim());
      const interests = Array.from(new Set([...manual, ...chips]));
      const minExp = Number(document.getElementById('t_min_exp').value);
      const needHours = Number(document.getElementById('t_need_hours').value);

      if(!interests.length){
        alert("Please choose or type at least one interest.");
        return;
      }

      const mentors = getMentors();
      const withScores = mentors.map(m => ({...m, _score: scoreMentor(m, interests, minExp, needHours)}))
                                .filter(m => m._score > 0)
                                .sort((a,b) => b._score - a._score || b.experience - a.experience);

      document.getElementById('matchHint').textContent = `Showing ${Math.min(withScores.length,6)} best matches`;
      renderResults(withScores);
    });

    
  </script>
</body>
</html>
